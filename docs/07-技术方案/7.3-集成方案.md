# 7.3 集成方案

## 7.3.1 Keycloak与AD集成

### 集成架构
```
AD/LDAP ←→ Keycloak LDAP Federation ←→ Keycloak Realm ←→ 应用服务
```

### 配置要点
1. 配置LDAP Federation Provider
2. 设置用户属性映射
3. 配置组-角色映射
4. 同步策略配置

## 7.3.2 ShardingSphere与OPA集成

### 集成架构
```
应用服务 → ShardingSphere Proxy → OPA策略引擎 → 数据库
              ↓                        ↓
         数据脱敏                  权限决策
```

### 集成方式
1. OPA Sidecar部署
2. 策略缓存配置
3. 决策超时设置
4. 故障降级策略

## 7.3.3 Milvus与DCPE集成

### 集成架构
```
原始数据 → DCPE加密引擎 → 加密向量 → Milvus存储
              ↓
         权限向量 → 访问控制
```

### 集成要点
1. 加密向量生成
2. 权限向量配置
3. 访问控制逻辑
4. 解密检索流程

## 7.3.4 Kong与Keycloak集成

### 集成架构
```
用户请求 → Kong网关 → Keycloak验证 → Token验证 → 路由到后端
```

### 集成配置
1. 配置Keycloak JWT插件
2. 设置Token验证参数
3. 配置路由规则
4. 设置限流策略

## 7.3.5 相关文档

- [总体架构设计](./7.1-总体架构设计.md)
- [技术选型依据](./7.2-技术选型依据.md)
- [部署拓扑](./7.4-部署拓扑.md)
